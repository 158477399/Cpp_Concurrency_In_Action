#关于这本书

本书是基于新C++标准的关于并发和多线程机制的深入指导书籍。从最基本的`std::thread std::mutex`和`std::async`的使用，到复杂的原子操作和内存模型。

##路线图

前4章，介绍了由标准库提供的各种库工具，以及展示了如何使用他们。

第5章，涵盖了低层内存模型和原子操作的实际情况，包括原子操作是如何对其他代码进行顺序限制的，这章标志着介绍部分的结束。

第6章和第7章，开始更高层次的主题，有一些例子是关于如何使用基本的工具去构建更加复杂的数据结构——第6章中是基于锁的数据结构，和第7章中是无锁数据结构。

第8章，继续较高层次的主题，是关于如何设计多线程代码的一些指导意见，覆盖了一些性能问题，以及一些并行算法实例。

第9章，包括线程管理——线程池，工作队列，以及中断操作。

第10章，包括测试和调试——bug的类型，如何定位Bug的技巧，以及如何对他们进行测试等等。

附录，包括了一些新的语言工具的一个简要的描述，介绍了与多线程相关的新标准，以及在第4章中提到的消息传递库的实现细节，和C++11线程库的完整的参考。

##谁应该读这本书

如果你正在用C++写一个多线程的代码，你应该读这本书。如果你正在使用C++标准库中的新的多线程工具，从本书中个可以得到一些指导。如果你正在使用其他的线程库，之后章节里的指导和技术也是有用的。

读这本书的前提是，假设你已经有了一个较好的C++的知识；关于多线程编程的知识或者经验是不必须的，虽然他们可能是有用的。

###如何使用这本书

如果你之前从来没有写过多线程的代码，我建议你从头到尾顺序阅读本书；不过，你可以跳过第5章中的较为细节的部分。第7章内容依赖于第5章中的内容，因此，如果你跳过了第5章，应该保证在读第7章时，已经读过第5章。

如果你没有用过新的C++11语言工具，为了确保跟上这本书中例子的进度，先阅读一下附录是有必要的。新的语言工具的使用在文本中被标注出来，不过，当遇到一些没见过的工具时，你可以随时回看附录。

如果你(有大量的)在不同环境下写多线程代码的经验，开始的章节仍有必要浏览一下，因为这样就能看到你所熟知的工具在新的C++标准上是如何对应的。如果你要用原子变量去做一个比较底层的工作，第5章是必须的阅读的。第8章，有关C++中多线程的异常和安全性内容，是值得一看的。如果你有一个特别的任务，索引和目录能够帮你快速找到相关的内容。

当你已经了解C++线程库，附录D应该还是有用的。例如，查找每个类和函数的细节。你可能也喜欢回顾主要的章节，并刷新使用一个特定的构造或阅读示例代码。

##代码公约和下载

列表中的所有代码和文本中的像这样固定宽度的字体，是为了区分普通文本。代码注释伴随着许多列表，重要概念高亮显示。在某些情况下，你可以通过页下给出的快捷链接进行查看

本书中所有工作实例的源代码可供下载出版商的网站在www.manning.com/cplusplusconcurrencyinaction。

###软件需求

要使用书中的代码，你可能需要一个较新的C++编译器，这个编译器要支持C++11语言的特性（见附录A），并且你需要一个C++标准线程库的拷贝。

在写作的时候我意识到，在实现标准线程库的时候g++是唯一的编译器，尽管Microsoft Visual Studio 2011 preview中也有实现。线程库在g++中的实现，是在g++4.3发布时，被首次被介绍，并且在随后的发布版本中被扩展。g++4.3也引进了对一些新的C++11语言特性的支持，更多对新的C++11语言特性的
支持在每个后续的发布版本中。更多细节请参考g++ C++11状态页面[1]。

Microsoft Visual Studio 2010提供了提供了一些新的C++11语言特性，例如右值引用和lambda函数，但是没有实现线程库。

我的公司，也就是Software Solutions Ltd，销售C++11标准线程库的完整实现，可以使用在Microsoft Visual Studio 2005, Microsoft Visual
Studio 2008, Microsoft Visual Studio 2010,以及各种g++版本上[2]。这个线程库也被用来测试本书中的例子。

Boost线程库[3]提供的API，基于C++11标准线程库建议，以及可移植到多个平台。本书中的大多数例子都能使用Boost线程库来完成，很简单的办法就是将std::替换为boost::，并且使用`#include`引用适当的头文件。这里还有一些工具是还没有被支持的(例如`std::async`)或在Boost线程库中有不同名字的(例如`boost::unique_future`)。

##作者在线

购买*C++ Concurrency in Action*就能一个在曼宁刊物(*Manning Publications*)上的私人网络论坛，那里你可以对本书做一些评论，问一些技术问题，就能获得来自作者或者其他读者的帮助。为了能够访问论坛，并订阅它，在你的浏览器地址中输入www.manning.com/CPlusPlusConcurrencyinAction.这个页面将告诉你如何在注册之后访问论坛，你能获得什么样的帮助，还有论坛中的一些规则。

曼宁保证为本书的读者提供和其他读者，以及作者交流的场所。不过，不保证这样的场所不会收取任何的费用，因为不过维护本书的论坛还是其自愿的(不收费)。所以，我们建议你可以尝试提一些有挑战性的问题给作者，免得他不务正业！

作者在线论坛和之前讨论的文档记录，在本书印刷时就可以从公共网对其进行访问。


----------


【1】GNU Compiler Collection C++0x/C++11 status page, http://gcc.gnu.org/projects/cxx0x.html.

【2】The `just::thread` implementation of the C++ Standard Thread Library, http://www.stdthread.co.uk.

【3】The Boost C++ library collection, http://www.boost.org.